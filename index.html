<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Whole Hog</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background: #0f172a; color: white; min-height: 100vh; }
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .active-track { background: rgba(139, 92, 246, 0.2); border-left: 4px solid #8b5cf6; }
        input[type="range"] { accent-color: #8b5cf6; }
        .animate-spin-slow { animation: spin 8s linear infinite; animation-play-state: paused; }
        .playing .animate-spin-slow { animation-play-state: running; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    </style>
</head>
<body class="flex items-center justify-center p-4">

    <div id="main-player" class="glass w-full max-w-5xl rounded-3xl overflow-hidden flex flex-col md:flex-row shadow-2xl min-h-[600px]">
        
        <!-- Left: Visualization & Info -->
        <div class="p-10 w-full md:w-1/2 flex flex-col items-center justify-center border-b md:border-b-0 md:border-r border-white/10">
            <div class="relative w-64 h-64 mb-10">
                <div class="absolute inset-0 bg-purple-500 rounded-full blur-3xl opacity-10"></div>
                <div class="animate-spin-slow w-full h-full rounded-full border-4 border-slate-700 p-2 bg-slate-800 shadow-2xl overflow-hidden">
                    <img id="track-art" src="https://cdn.discordapp.com/attachments/1282025137993945211/1458264316003487787/IMG_3054.png?w=400&h=400&fit=crop" class="w-full h-full object-cover rounded-full">
                </div>
            </div>

            <div class="text-center mb-8">
                <h1 id="track-title" class="text-2xl font-bold">Loading...</h1>
                <p id="track-artist" class="text-slate-400 text-sm mt-1">ðŸ«´</p>
            </div>

            <div class="w-full px-4">
                <input type="range" id="progress" class="w-full h-1 bg-slate-700 rounded-lg appearance-none cursor-pointer" value="0">
                <div class="flex justify-between text-[10px] font-mono text-slate-500 mt-2">
                    <span id="current-time">0:00</span>
                    <span id="duration">0:00</span>
                </div>
            </div>

            <div class="flex items-center gap-6 mt-8">
                <button id="prev" class="text-slate-400 hover:text-white transition-colors"><svg width="24" height="24" fill="currentColor" viewBox="0 0 16 16"><path d="M4 4a.5.5 0 0 1 1 0v3.248l6.267-3.636c.52-.302 1.166.077 1.166.677v7.422c0 .6-.646.979-1.166.677L5 8.752V12a.5.5 0 0 1-1 0V4zm7 7.82V4.18L5.697 8 11 11.82z"/></svg></button>
                <button id="play" class="w-16 h-16 bg-white text-black rounded-full flex items-center justify-center hover:scale-105 transition-transform">
                    <svg id="play-icon" width="28" height="28" fill="currentColor" viewBox="0 0 16 16"><path d="M11.596 8.697l-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"/></svg>
                </button>
                <button id="next" class="text-slate-400 hover:text-white transition-colors"><svg width="24" height="24" fill="currentColor" viewBox="0 0 16 16"><path d="M12.5 4a.5.5 0 0 0-1 0v3.248L5.233 3.612C4.713 3.31 4.067 3.69 4.067 4.29v7.422c0 .6.646.979 1.166.677L11.5 8.752V12a.5.5 0 0 0 1 0V4zm-7 7.82V4.18L10.303 8 5.5 11.82z"/></svg></button>
            </div>
        </div>

        <!-- Right: Repository Playlist -->
        <div class="p-8 w-full md:w-1/2 flex flex-col bg-black/20">
            <h2 class="text-lg font-semibold mb-6 flex items-center gap-2">
                <?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN"
 "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg version="1.0" xmlns="http://www.w3.org/2000/svg"
 width="18.000000pt" height="18.000000pt" viewBox="0 0 600.000000 600.000000"
 preserveAspectRatio="xMidYMid meet">
<g transform="translate(0.000000,600.000000) scale(0.100000,-0.100000)"
fill="#ffffff" stroke="none">
<path d="M273 5158 c55 -112 134 -275 177 -363 43 -88 114 -234 158 -325 44
-91 274 -563 511 -1050 238 -487 640 -1311 894 -1833 354 -727 464 -944 473
-935 6 7 68 113 137 235 l126 222 -221 453 c-121 249 -271 557 -332 683 -62
127 -429 879 -816 1673 l-703 1442 -252 0 -252 0 100 -202z m387 157 c0 -8 4
-15 8 -15 11 0 52 -82 52 -104 0 -9 7 -19 15 -22 8 -4 13 -9 10 -14 -2 -4 7
-22 20 -40 13 -18 22 -36 20 -40 -3 -4 2 -13 10 -20 8 -7 12 -16 9 -21 -3 -5
0 -9 5 -9 6 0 11 -8 11 -18 0 -10 7 -27 15 -38 8 -10 15 -27 15 -37 0 -11 5
-15 11 -11 7 4 9 0 5 -14 -4 -11 -3 -23 2 -26 5 -3 33 -54 63 -113 29 -59 58
-111 64 -115 5 -4 7 -8 3 -8 -4 0 29 -71 72 -157 44 -87 82 -170 86 -185 3
-17 10 -25 16 -22 7 4 8 2 4 -5 -4 -6 2 -24 13 -39 11 -16 27 -48 37 -73 10
-24 22 -47 26 -50 5 -3 11 -12 12 -20 5 -23 69 -153 79 -160 5 -3 9 -10 9 -15
0 -5 41 -92 91 -194 50 -102 91 -187 92 -190 0 -3 20 -45 44 -95 25 -49 44
-95 44 -102 0 -7 4 -13 8 -13 4 0 16 -19 27 -42 11 -24 41 -87 66 -140 25 -53
46 -102 46 -108 0 -6 6 -8 13 -4 6 4 9 4 5 -1 -4 -4 12 -44 34 -89 23 -44 43
-83 43 -86 1 -3 32 -68 70 -145 38 -77 69 -142 70 -145 4 -11 26 -56 35 -70 5
-8 35 -69 66 -135 31 -66 60 -121 65 -123 5 -2 9 -10 9 -18 0 -8 20 -54 44
-102 24 -48 65 -132 92 -187 27 -55 52 -103 57 -106 5 -3 9 -12 10 -20 2 -8
14 -39 28 -69 15 -30 32 -70 39 -88 7 -17 16 -32 20 -32 4 0 13 -19 19 -42 7
-24 17 -48 23 -55 11 -13 128 -249 128 -258 0 -3 11 -23 25 -46 14 -22 23 -44
20 -49 -3 -5 0 -12 6 -15 22 -14 27 -49 9 -75 -9 -14 -30 -50 -46 -80 -16 -30
-34 -61 -41 -67 -6 -7 -17 -29 -23 -48 -6 -19 -15 -35 -18 -35 -4 0 -25 -32
-46 -70 -22 -39 -43 -70 -47 -70 -6 0 -80 141 -84 160 0 3 -9 21 -20 40 -28
53 -99 194 -100 200 -3 15 -31 66 -40 72 -5 4 -6 8 -1 8 5 0 4 6 -1 12 -6 7
-13 26 -17 41 -4 18 -11 25 -19 21 -7 -4 -9 -4 -6 0 4 4 -17 56 -47 116 -30
60 -54 114 -54 120 0 5 -4 10 -8 10 -4 0 -14 17 -21 38 -8 20 -22 49 -33 64
-11 16 -17 28 -14 28 3 0 -11 30 -29 68 -19 37 -35 72 -35 78 0 6 -7 17 -15
24 -9 7 -13 15 -11 18 3 3 -4 18 -15 34 -12 16 -22 34 -23 41 -1 7 -35 80 -76
162 -40 83 -75 156 -76 164 -2 8 -7 17 -13 20 -5 3 -19 33 -32 66 -12 33 -28
67 -35 76 -8 8 -14 23 -14 32 0 9 -4 18 -9 21 -8 5 -54 91 -57 106 -3 15 -26
65 -32 70 -4 3 -14 21 -23 40 -9 19 -57 119 -107 221 -51 103 -92 191 -92 196
0 6 -7 16 -15 23 -8 6 -14 15 -13 18 2 7 -19 53 -48 106 -9 15 -17 33 -18 40
-1 6 -11 27 -21 46 -21 38 -58 112 -60 120 0 3 -47 100 -104 215 -57 116 -119
244 -139 285 -20 41 -40 78 -46 82 -6 4 -7 10 -3 14 4 4 2 13 -3 19 -12 14
-131 255 -150 303 -7 17 -17 32 -23 32 -6 0 -7 3 -4 6 3 4 -25 67 -62 140 -38
73 -66 135 -63 138 3 3 0 6 -7 6 -7 0 -10 4 -7 9 3 5 -4 21 -15 35 -11 15 -22
32 -23 39 -2 6 -17 42 -34 79 -18 36 -32 71 -32 76 0 5 -6 15 -13 21 -8 6 -20
29 -27 51 -7 22 -17 40 -22 40 -4 0 -7 3 -6 8 3 10 -64 145 -77 154 -5 4 -6 8
-2 8 5 0 -7 28 -26 63 -18 34 -32 67 -30 72 2 6 84 9 218 7 181 -2 215 -5 215
-17z"/>
<path d="M980 5355 c0 -3 176 -366 391 -807 216 -442 427 -875 469 -963 43
-88 129 -266 192 -395 117 -240 796 -1630 986 -2020 57 -118 137 -282 176
-364 l72 -149 132 231 c72 128 132 236 132 241 0 8 -150 320 -488 1011 -117
240 -157 322 -674 1385 -201 413 -438 899 -527 1080 -88 182 -207 425 -263
542 l-103 212 -247 0 c-137 1 -248 -1 -248 -4z m486 -42 c4 -10 8 -20 9 -23 2
-3 6 -15 10 -27 4 -13 11 -20 16 -17 5 3 6 -2 3 -10 -3 -9 -1 -16 5 -16 6 0
10 -3 9 -7 -2 -12 103 -228 113 -231 5 -2 7 -8 3 -13 -3 -5 0 -9 7 -9 7 0 9
-3 6 -7 -4 -3 7 -30 23 -60 17 -29 28 -53 25 -53 -2 0 9 -23 25 -50 17 -28 30
-55 30 -60 0 -5 35 -78 77 -162 43 -84 78 -155 78 -158 1 -4 174 -359 261
-534 19 -37 34 -77 34 -89 0 -11 3 -17 7 -14 5 6 47 -72 43 -82 -1 -2 2 -7 7
-10 7 -5 34 -56 38 -71 0 -3 9 -21 20 -40 11 -19 19 -37 20 -40 0 -3 24 -54
53 -114 28 -60 52 -113 52 -118 0 -5 5 -6 10 -3 6 4 9 2 8 -3 -2 -5 9 -34 24
-63 15 -30 42 -85 60 -124 18 -38 36 -71 41 -73 4 -2 7 -9 7 -16 0 -17 39 -97
59 -120 12 -14 12 -17 2 -11 -9 5 -6 -4 7 -22 12 -17 19 -33 16 -35 -3 -3 6
-22 20 -42 13 -20 32 -57 42 -81 9 -25 21 -45 27 -45 6 0 8 -3 4 -6 -5 -5 88
-202 146 -309 6 -11 21 -39 33 -62 12 -22 20 -44 17 -47 -4 -3 -1 -6 5 -6 7 0
12 -9 12 -19 0 -11 5 -23 10 -26 6 -4 8 -11 5 -16 -4 -5 -1 -9 4 -9 6 0 11 -9
11 -21 0 -11 5 -17 10 -14 6 3 10 0 10 -7 0 -7 10 -33 22 -58 12 -25 22 -47
23 -50 9 -26 28 -66 33 -70 12 -9 32 -49 32 -65 0 -8 5 -15 11 -15 5 0 7 -4 4
-10 -3 -5 -1 -10 6 -10 7 0 9 -3 6 -7 -4 -3 4 -25 17 -47 13 -23 40 -79 61
-126 21 -46 44 -91 52 -98 7 -8 11 -17 8 -22 -3 -4 2 -13 10 -20 8 -7 15 -18
15 -26 0 -20 32 -84 43 -84 5 0 7 -6 4 -14 -3 -8 1 -20 9 -26 8 -7 14 -20 14
-30 0 -10 7 -23 15 -30 8 -7 15 -16 15 -21 0 -13 62 -144 71 -147 9 -4 -37
-93 -82 -158 -18 -26 -26 -43 -18 -39 8 5 4 -3 -8 -16 -12 -13 -23 -28 -24
-34 -1 -5 -13 -27 -25 -47 -13 -21 -24 -41 -24 -46 0 -4 -10 -19 -23 -32 -12
-14 -21 -27 -19 -30 2 -2 -1 -6 -6 -8 -8 -2 -69 112 -70 132 0 5 -4 12 -9 15
-9 7 -41 62 -42 74 0 4 -8 22 -18 40 -9 17 -18 39 -19 47 -2 8 -8 16 -13 18
-6 2 -11 10 -11 17 0 7 -33 78 -74 158 -41 80 -71 148 -68 151 3 3 0 6 -7 6
-7 0 -10 4 -7 9 3 5 -3 20 -14 34 -11 14 -20 32 -20 40 0 8 -7 20 -15 27 -8 6
-14 15 -13 18 1 4 -3 17 -10 30 -7 12 -10 28 -6 34 4 6 3 8 -4 4 -6 -3 -13 6
-17 24 -4 16 -11 33 -17 36 -8 5 -46 80 -53 104 -6 22 -38 86 -54 109 -11 16
-18 31 -14 35 3 3 1 6 -5 6 -7 0 -11 3 -10 8 2 4 -25 63 -59 132 -33 69 -80
163 -102 210 -23 47 -45 92 -50 100 -17 28 -109 225 -116 248 -3 12 -11 22
-16 22 -5 0 -8 3 -7 8 1 4 -33 77 -75 163 -42 87 -77 160 -77 164 0 4 -9 20
-21 36 -11 16 -18 29 -15 29 3 0 -32 75 -79 168 -46 92 -107 217 -136 277 -28
61 -57 113 -63 117 -6 4 -8 8 -4 8 5 0 -10 35 -32 77 -21 42 -37 80 -34 84 2
4 0 9 -5 11 -9 3 -131 251 -131 267 0 5 -4 11 -8 13 -10 4 -82 153 -82 169 0
6 -8 23 -19 37 -24 35 -126 245 -123 255 1 4 -3 7 -8 7 -6 0 -9 3 -8 8 3 10
-103 226 -116 234 -6 4 -8 8 -4 8 4 0 -9 30 -27 68 -19 37 -35 72 -35 78 0 6
-6 17 -13 23 -8 6 -20 29 -27 51 -7 22 -18 40 -23 40 -6 0 -8 3 -5 6 3 3 -26
69 -66 147 -39 78 -72 145 -74 150 -2 4 95 7 216 7 200 0 221 -2 228 -17z"/>
<path d="M3119 5143 l109 -218 1006 0 c553 0 1006 -3 1006 -7 0 -4 -33 -65
-74 -135 -73 -128 -282 -493 -1098 -1918 -240 -418 -444 -774 -454 -791 l-18
-32 104 -216 c81 -167 107 -213 116 -204 6 7 140 238 297 513 156 275 585
1024 952 1665 367 641 689 1204 716 1251 l49 87 0 111 0 111 -1410 0 -1410 0
109 -217z m1333 188 l1347 -1 -4 -97 c-4 -117 -4 -120 -33 -160 -12 -17 -22
-34 -22 -37 0 -4 -11 -23 -24 -44 -12 -20 -23 -40 -22 -43 1 -4 -6 -15 -16
-25 -9 -11 -35 -55 -58 -99 -59 -112 -92 -169 -105 -177 -5 -4 -6 -8 -1 -8 4
0 -3 -15 -17 -34 -15 -18 -23 -36 -20 -40 4 -3 2 -6 -4 -6 -6 0 -13 -8 -16
-17 -4 -10 -18 -36 -32 -58 -14 -22 -30 -52 -36 -67 -6 -16 -15 -28 -21 -28
-5 0 -6 -4 -3 -10 3 -5 2 -10 -3 -10 -8 0 -36 -50 -32 -59 1 -2 -2 -7 -7 -10
-11 -8 -67 -102 -69 -118 -1 -6 -17 -33 -35 -60 -19 -26 -34 -50 -34 -53 -1
-6 -33 -64 -52 -95 -7 -11 -18 -31 -25 -45 -7 -14 -27 -47 -44 -75 -17 -27
-45 -75 -61 -105 -17 -30 -38 -71 -49 -90 -10 -19 -21 -37 -24 -40 -3 -3 -14
-24 -24 -47 -11 -24 -23 -43 -28 -43 -4 0 -8 -7 -8 -15 0 -8 -4 -15 -9 -15 -5
0 -13 -10 -17 -22 -3 -11 -26 -54 -50 -93 -24 -40 -44 -77 -44 -82 0 -6 -8
-21 -19 -34 -10 -13 -33 -51 -51 -84 -18 -33 -42 -72 -52 -87 -11 -16 -16 -28
-12 -28 4 0 -1 -9 -11 -20 -10 -11 -15 -20 -11 -20 4 0 -2 -10 -13 -22 -11
-11 -18 -24 -16 -28 3 -5 -2 -11 -11 -14 -8 -3 -12 -10 -9 -16 3 -5 2 -10 -3
-10 -5 0 -18 -19 -28 -42 -10 -24 -34 -65 -51 -92 -18 -26 -33 -52 -33 -58 0
-5 -8 -22 -19 -36 -10 -15 -35 -58 -56 -97 -20 -38 -44 -78 -52 -87 -9 -10
-12 -18 -8 -18 5 0 -2 -12 -16 -27 -13 -14 -18 -22 -10 -18 8 5 3 -7 -11 -26
-14 -19 -38 -59 -54 -89 -16 -30 -38 -68 -50 -85 -12 -16 -37 -59 -56 -95 -19
-36 -45 -83 -58 -105 -13 -22 -30 -52 -37 -67 -8 -15 -19 -30 -24 -33 -5 -4
-7 -10 -4 -15 3 -5 -8 -22 -25 -38 -16 -17 -30 -35 -30 -42 0 -15 -48 -107
-60 -115 -5 -3 -18 -26 -29 -50 -11 -25 -23 -45 -27 -45 -4 0 -5 3 -2 6 3 3
-32 80 -78 171 -46 91 -80 171 -77 176 3 6 1 7 -4 4 -6 -4 -13 2 -16 12 -3 12
1 22 9 25 8 3 14 10 14 16 0 6 11 28 25 50 14 22 23 40 19 40 -3 0 4 13 15 29
12 16 21 32 21 35 0 3 16 29 35 56 19 28 32 50 29 50 -4 0 -1 7 6 15 7 8 10
15 6 15 -3 0 3 9 14 20 11 11 20 25 20 31 0 7 8 18 18 26 10 9 11 12 2 7 -8
-4 -4 5 9 19 14 15 22 27 18 27 -3 0 5 16 18 36 14 20 25 41 25 46 0 5 5 6 12
2 7 -4 8 -3 4 5 -4 6 2 24 13 40 11 15 18 31 14 35 -3 3 -2 6 4 6 9 0 32 39
29 50 0 3 5 12 12 20 25 29 62 91 50 84 -6 -4 0 8 15 28 15 19 27 40 27 46 0
7 4 12 8 12 5 0 19 25 32 55 13 30 27 52 33 48 6 -3 7 -1 3 5 -3 6 0 16 7 24
7 7 14 16 16 20 3 13 35 69 63 111 15 23 24 46 21 52 -4 5 -3 7 1 3 5 -4 22
19 38 50 38 71 81 148 155 277 12 22 33 59 45 83 12 23 26 42 30 42 4 0 8 5 8
12 0 6 10 25 23 42 35 47 43 61 27 51 -8 -5 -3 7 11 26 31 44 45 66 66 109 9
19 28 49 41 67 13 17 24 35 25 40 1 4 6 7 10 5 5 -1 6 2 2 7 -3 6 12 39 35 74
22 35 40 69 40 76 0 6 5 11 11 11 6 0 8 7 5 16 -3 8 -2 13 3 10 9 -6 26 22 23
37 -1 4 3 7 10 7 6 0 8 3 5 6 -4 4 2 19 12 33 10 14 35 58 56 96 21 39 53 93
72 122 18 28 33 56 33 62 0 6 5 11 11 11 5 0 8 4 5 9 -3 4 6 23 20 42 14 19
34 52 45 74 21 46 51 98 61 105 4 3 16 27 28 54 37 88 125 81 -1008 81 l-997
0 -14 30 c-8 17 -18 33 -23 36 -6 3 -9 9 -8 13 2 6 -85 193 -111 239 -5 10
-14 29 -19 41 -7 19 -5 22 13 20 12 -1 628 -3 1369 -3z"/>
<path d="M3216 4888 c3 -5 10 -6 15 -3 13 9 11 12 -6 12 -8 0 -12 -4 -9 -9z"/>
<path d="M1820 4781 c0 -6 4 -13 10 -16 6 -3 7 1 4 9 -7 18 -14 21 -14 7z"/>
<path d="M4485 3709 c-4 -6 -4 -13 -1 -16 3 -4 6 -1 6 6 0 7 5 9 12 5 7 -4 8
-3 4 4 -9 15 -13 15 -21 1z"/>
<path d="M3896 1688 c3 -5 10 -6 15 -3 13 9 11 12 -6 12 -8 0 -12 -4 -9 -9z"/>
</g>
</svg>

                Music
            </h2>
            
            <div id="playlist" class="flex-1 overflow-y-auto space-y-2 pr-2 custom-scrollbar">
                <!-- Tracks will load here -->
            </div>
            
            <div class="mt-6 p-4 rounded-2xl bg-white/5 border border-white/10">
                <p class="text-[11px] text-slate-500 leading-relaxed">
                    <strong>Note:</strong> Upload MP3 files to a folder named <code class="text-purple-400">music</code> in your repo, then add their filenames to the <code class="text-purple-400">SONG_LIST</code> array in this file's code.
                </p>
            </div>
        </div>
    </div>

    <audio id="audio"></audio>

    <script>
        /**
         * CONFIGURATION
         * Add your filenames exactly as they appear in your /music/ folder
         */
        const SONG_LIST = [
            "Westaroni.mp3",
            "Mid Weast.mp3"
        ];
        
        // This helper gets the base path for your GitHub Pages site
        const BASE_PATH = window.location.pathname.includes('index.html') 
            ? window.location.pathname.replace('index.html', '') 
            : window.location.pathname;
        
        const musicFolder = `${BASE_PATH}music/`;

        const audio = document.getElementById('audio');
        const playlistEl = document.getElementById('playlist');
        const trackTitle = document.getElementById('track-title');
        const playBtn = document.getElementById('play');
        const playIcon = document.getElementById('play-icon');
        const progress = document.getElementById('progress');
        
        let currentIndex = 0;
        let isPlaying = false;

        const tracks = SONG_LIST.map(filename => ({
            name: filename.replace('.mp3', '').replace(/-/g, ' '),
            url: musicFolder + filename,
            filename: filename
        }));

        function init() {
            if (tracks.length === 0) {
                trackTitle.innerText = "No songs found in SONG_LIST";
                return;
            }
            renderPlaylist();
            loadTrack(0);
        }

        function renderPlaylist() {
            playlistEl.innerHTML = '';
            tracks.forEach((track, index) => {
                const div = document.createElement('div');
                div.className = `p-4 rounded-xl cursor-pointer flex items-center justify-between transition-all hover:bg-white/5 ${index === currentIndex ? 'active-track' : ''}`;
                div.innerHTML = `
                    <div class="truncate pr-4">
                        <div class="font-medium truncate">${track.name}</div>
                        <div class="text-[10px] text-slate-500 uppercase tracking-widest">Available</div>
                    </div>
                    <div class="text-slate-600 text-xs">MP3</div>
                `;
                div.onclick = () => loadTrack(index, true);
                playlistEl.appendChild(div);
            });
        }

        function loadTrack(index, playImmediately = false) {
            currentIndex = index;
            const track = tracks[index];
            audio.src = track.url;
            trackTitle.innerText = track.name;
            
            renderPlaylist();

            // Handle errors (e.g. file doesn't exist in the folder)
            audio.onerror = () => {
                trackTitle.innerText = "Error: File not found";
                console.error(`Could not load: ${track.url}`);
            };

            if (playImmediately) togglePlay(true);
        }

        function togglePlay(forcePlay = null) {
            const shouldPlay = forcePlay !== null ? forcePlay : !isPlaying;
            
            if (shouldPlay) {
                audio.play().catch(e => console.log("User interaction required"));
                playIcon.innerHTML = `<path d="M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z"/>`;
                document.getElementById('main-player').classList.add('playing');
                isPlaying = true;
            } else {
                audio.pause();
                playIcon.innerHTML = `<path d="M11.596 8.697l-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"/>`;
                document.getElementById('main-player').classList.remove('playing');
                isPlaying = false;
            }
        }

        playBtn.onclick = () => togglePlay();
        document.getElementById('next').onclick = () => loadTrack((currentIndex + 1) % tracks.length, true);
        document.getElementById('prev').onclick = () => loadTrack((currentIndex - 1 + tracks.length) % tracks.length, true);

        audio.ontimeupdate = () => {
            const p = (audio.currentTime / audio.duration) * 100;
            progress.value = p || 0;
            document.getElementById('current-time').innerText = formatTime(audio.currentTime);
            document.getElementById('duration').innerText = formatTime(audio.duration);
        };

        progress.oninput = () => {
            audio.currentTime = (progress.value / 100) * audio.duration;
        };

        audio.onended = () => document.getElementById('next').click();

        function formatTime(s) {
            if (isNaN(s)) return "0:00";
            const m = Math.floor(s / 60);
            const r = Math.floor(s % 60);
            return `${m}:${r < 10 ? '0' : ''}${r}`;
        }

        init();
    </script>
</body>
</html>

